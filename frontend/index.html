<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pindahan App - Atur Barang Anda</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="/assets/favicon.png">
</head>
<body>
    <div class="container">
        <header>
            <h1>📦Aplikasi Buat Pindahan</h1>
            <p>Mulai mengatur Kardus Pindahan Anda dengan Sistem!</p>
        </header>

        <!-- Mode Input -->
        <section id="input-mode" class="mode active">
            <h2>Tambah Kardus Baru</h2>
            <form id="box-form">
                <div class="form-group">
                    <label for="box-label">Label Kardus:</label>
                    <input type="text" id="box-label" placeholder="Contoh: Dapur - Piring Pecah Belah" required>
                </div>

                <div class="form-group">
                    <label for="box-content">Isi Kardus (pisahkan dengan koma):</label>
                    <textarea id="box-content" placeholder="Contoh: hardisk external, hdd, keyboard usb, pakaian, tas hermes" required></textarea>
                </div>

                <button type="submit">Simpan & Buat ID Unik</button>
            </form>

            <!-- Section baru untuk Input ID unik dan tombol Lihat Kardus -->
            <div style="margin-top: 20px; display: flex; align-items: center; gap: 10px;">
                <input type="text" id="idUnikInput" placeholder="Masukkan ID unik (4 karakter)"
                       oninput="this.value = this.value.toUpperCase().slice(0, 4);"
                       maxlength="4"
                       style="flex: 3; padding: 10px; border: 1px solid #ccc; border-radius: 5px; font-size: 16px;">
                <button id="lihatKardusButton"
                        onclick="const id = document.getElementById('idUnikInput').value.trim().toUpperCase(); if(id.length === 4) { window.open(window.location.origin + '/#' + id, '_blank'); } else { alert('Mohon masukkan 4 karakter ID unik.'); }"
                        style="flex: 1; padding: 10px 15px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px;">
                    Lihat Kardus
                </button>
            </div>

            <div id="result" class="result hidden">
                <h3>Kode Unik Kardus Anda:</h3>
                <div class="box-id" id="generated-id"></div>
                <p>Tulis Kode ini di badan kardus Anda</p>
                <h4>URL Kardus:</h4>
                <div class="box-url" id="box-url"></div>
                <p>Klik URL di atas untuk melihat detail kardus di halaman baru</p>
                
                <h4>QR Code:</h4>
                <div class="qr-code-container">
                    <p>Gunakan URL pendek untuk QR Code agar kompatibel dengan semua pembaca QR:</p>
                    <div class="box-short-url" id="box-short-url"></div>
                    <div class="qr-code" id="qr-code-container"></div>
                    <p>Scan QR Code di atas untuk langsung membuka kardus ini</p>
                    <button id="save-qr-btn" class="save-qr-btn">🖨️ Simpan Gambar untuk Print/PDF</button>
                </div>
                
                <button id="new-box">Tambah Kardus Lain</button>
            </div>
        </section>

        <!-- Mode Detail -->
        <section id="detail-mode" class="mode hidden">
            <h2>Detail Isi Kardus</h2>
            <div class="box-info">
                <div class="box-id-display" id="display-id"></div>
                <div class="box-label-display" id="display-label"></div>
            </div>
            <div class="box-content-display">
                <div class="search-container">
                    <input type="text" id="search-items" placeholder="Cari item...">
                </div>
                <h3>Isi Kardus:</h3>
                <ul id="display-content"></ul>
                <div class="add-item-form">
                    <input type="text" id="new-item-text" placeholder="Tambah item baru...">
                    <button id="add-item-btn">Tambah Item</button>
                </div>
            </div>
            
            <!-- QR Code Section untuk halaman detail -->
            <div class="qr-code-section" id="detail-qr-section" style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 8px; text-align: center;">
                <h3>QR Code untuk Kardus Ini</h3>
                <p>Scan QR Code di bawah untuk langsung membuka kardus ini:</p>
                <div class="qr-code-container" id="detail-qr-container"></div>
                <button id="save-detail-qr-btn" class="save-qr-btn">🖨️ Simpan Gambar untuk Print/PDF</button>
            </div>
            
            <button id="back-to-input">Kembali ke Input</button>
        </section>
        <center><p>Jankerzone - Aplikasi Pindahan</p></center>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
